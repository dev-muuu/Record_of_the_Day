# 2022.03.07

## AlertDialog ì½”ë“œ ì •ë¦¬

ì–´ì œì™€ ë¹„ìŠ·í•œ ê²½ìš°ì¸ë°, Zatch í”„ë¡œì íŠ¸ë¥¼ ë³´ë©´ Alert dialogë¥¼ ë„ìš°ëŠ” ê²½ìš°ê°€ ë˜ê²Œ ë§ë‹¤. 

ê²Œë‹¤ê°€ Alert dialogì— ëŒ€í•´ì„œ customì„ ì§„í–‰í•˜ì˜€ê¸° ë•Œë¬¸ì— ì½”ë“œë¡œ ì‘ì„±í•  ê²½ìš°, ì„¤ì •ê°’ì´ ë§ë‹¤ë³´ë‹ˆ ê¸¸ì´ê°€ ê¸¸ì–´ì„œ ë§¤ë²ˆ êµ¬í˜„í•˜ê¸° ì¢€ ë²ˆê±°ë¡œì› ì—ˆë‹¤. 

í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ dialogì—ì„œ ì‚¬ìš©ë˜ëŠ” viewë“¤ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì„ í•˜ê²Œ ë˜ì—ˆë‹¤.  

í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” Alert Dialog ì¢…ë¥˜ê°€ 3ê°€ì§€ì¸ë°, 

ì´ ì¤‘ ê°€ì¥ ì½”ë“œê°€ ê¸¸ê³  ë§ì´ ì‚¬ìš©ë˜ëŠ” positive_negative_dialogë¥¼ ë¨¼ì € ì •ë¦¬í–ˆë‹¤. 

 

```java
public class PositiveNegativeDialog {

    private View view;
    private AlertDialog.Builder builder;
    private AlertDialog dialog;
    private TextView negative, positive, message;
    private PNDialogMessage dialogData;

    public PositiveNegativeDialog(Context context, ServiceType type, PNDialogMessage dialogData) {
        this.dialogData = dialogData;
        this.builder = new AlertDialog.Builder(context);
        if(type == ServiceType.Zatch)
            this.view = LayoutInflater.from(context).inflate(R.layout.dialog_negative_positive,null);
        else
            this.view = LayoutInflater.from(context).inflate(R.layout.dialog_negative_positive_yellow,null);
    }

    private void setViewComponent(){
        this.negative = view.findViewById(R.id.dialogNegativeButton);
        this.positive = view.findViewById(R.id.dialogPositiveButton);
        positive.setText(dialogData.getPositive());
        this.message = view.findViewById(R.id.dialogAskMessage);
        message.setText(dialogData.getMessage());
    }

    public AlertDialog createDialog(){
        builder.setView(this.view);
        setViewComponent();
        this.dialog = builder.create();
        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
        return dialog;
    }
    
    public void setMessageText(String newMessage){
        this.message.setText(newMessage);
    }

    public TextView getNegative() {
        return negative;
    }

    public TextView getPositive() {
        return positive;
    }

    public String getMessageText(){
        return message.getText().toString();
    }
    
}
```

<aside>

    ğŸ’¡ > ìƒì„±ìì˜ ê²½ìš°, Alert Dialogë¥¼ ë„ìš°ê¸° ìœ„í•´ í•„ìš”í•œ ìµœì†Œí•œì˜ ì •ë³´ë§Œ ì´ˆê¸°í™” ë˜ë„ë¡ ì‘ì„±í•´ë´¤ë‹¤.

    â†’ view ì´ˆê¸°í™” ì •ë³´ë¥¼ ìƒì„±ì ì•ˆì— ë„£ì–´ì•¼ í•˜ë‚˜ ê³ ë¯¼ì„ í–ˆì§€ë§Œ, ìƒì„±ìê°€ ë„ˆë¬´ ë¬´ê±°ì›Œì§€ì§€ ì•Šì„ê¹Œ ì‹¶ì–´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´í›„ dialogë¥¼ ìƒì„±í•  ë•Œ viewì— ëŒ€í•œ ì´ˆê¸°í™” ì‘ì—…ì´ ì§„í–‰ë˜ë„ë¡ í–ˆë‹¤. 

    > positive_negative dialogì˜ ê²½ìš°, positive ë²„íŠ¼, negative ë²„íŠ¼ ê°ê°ì„ ëˆŒë €ì„ ë•Œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ì‘ì—…, ì¼ì–´ë‚˜ì•¼ í•˜ëŠ” í–‰ë™ë“±ì´ ìˆê¸° ë•Œë¬¸ì— dialog ìƒì„±ì‹œ ìƒì„±í•œ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í–ˆë‹¤.

</aside>

---

```java
public enum PNDialogMessage {

    GatchAccept("ê°€ì¹˜ ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.", "ë„¤"),
    GatchRefuse("ê°€ì¹˜ ìš”ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?", "ë„¤"),
    Exit("ì±„íŒ…ë°©ì„ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?\n" +
            "ì±„íŒ…ë°©ì„ ë‚˜ê°€ë©´ ì±„íŒ… ë‚´ì—­ì€ ë³µêµ¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.", "ë„¤, í™•ì¸í–ˆìŠµë‹ˆë‹¤."),
    MakeMeeting("ì•½ì†ì„ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", "í™•ì¸"),
    Block("ë‹˜ì„ ì°¨ë‹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në” ì´ìƒì˜ ëŒ€í™”ê°€ ë¶ˆê°€í•©ë‹ˆë‹¤.","ë„¤, ì°¨ë‹¨í•©ë‹ˆë‹¤."),
    Register("ë“±ë¡ì„ ì™„ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?","ë“±ë¡ ì™„ë£Œ");

    private final String message;
    private final String positive;

    PNDialogMessage(String message, String positive) {
        this.message = message;
        this.positive = positive;
    }

    public String getMessage(){
        return this.message;
    }

    public String getPositive(){
        return this.positive;
    }
}
```

`PNDialogMessage` ì€ Alert Dialogì˜ messageì™€ postitive ë²„íŠ¼ textë¡œ ë„£ì„ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.   

ì´ëŠ” ìƒì„±ìë¥¼ ìƒì„±ì‹œ, ì¸ìë¡œ ë„£ì–´ì¤˜ì•¼ í•˜ëŠ” ë°ì´í„° ì¤‘ í•˜ë‚˜ì´ë‹¤. 

<aside>
ğŸ’¡  > `enum` íƒ€ì…ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, í´ë˜ìŠ¤ë¡œ ì‘ì„±í•´ì•¼ í•˜ë‚˜, ì—´ê±°í˜•ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•˜ë‚˜ ê³ ë¯¼ì„ í–ˆì—ˆë‹¤. 

â†’ í´ë˜ìŠ¤ë¡œ ì‘ì„±í•˜ê²Œ ë  ê²½ìš°, ê°ì²´ë¥¼ ìƒì„±í•  ë•Œë§ˆë‹¤ ì–´ë–¤ ë©”ì‹œì§€ë¥¼ ë„£ì–´ì¤„ ì§€ë„ ë§¤ë²ˆ ì¸ìë¡œ ë„£ì–´ì¤˜ì•¼ í•œë‹¤. 

1. ì•ì— ì¬ì¹˜ê°€ ë¶™ëƒ, ê°€ì¹˜ê°€ ë¶™ëƒë§Œ ë‹¤ë¥¼ ë¿, ì¬ì¹˜ì™€ ê°€ì¹˜ì—ì„œ ê°™ì€ ì•ˆë‚´ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.
2. ê°™ì€ ë©”ì‹œì§€ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë„ ë§ë‹¤

ì´ëŸ¬í•œ 2ê°€ì§€ ì´ìœ  ë•Œë¬¸ì— ë§¤ë²ˆ ê°’ì„ ì§ì ‘ ì§€ì •í•´ì„œ ë„£ì–´ì¤˜ì•¼ í•˜ëŠ” í´ë˜ìŠ¤ ë³´ë‹¤ëŠ” ë¯¸ë¦¬ ì§€ì •ëœ ê°’ì„ ë„˜ê²¨ì£¼ëŠ” ì—´ê±°í˜•ìœ¼ë¡œ êµ¬í˜„ì„ í•˜ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤ê³  ìƒê°í–ˆë‹¤.

</aside>

---

```java
PositiveNegativeDialog dialogClass = new PositiveNegativeDialog(getContext(), ServiceType.Zatch, PNDialogMessage.MakeMeeting);        
AlertDialog dialog = dialogClass.createDialog();        
dialogClass.getNegative().setOnClickListener(v->{       
	dialog.dismiss();        
});       
dialogClass.getPositive().setOnClickListener(v->{            
	listener.finishBottomSheet(true);            
	dialog.dismiss();        
});       
dialog.show();
```

ì •ë¦¬í•œ í´ë˜ìŠ¤ë¡œ ì‘ì„±í•œ ì½”ë“œì´ë‹¤. 

```java
builder = new AlertDialog.Builder(getContext());
View view = LayoutInflater.from(getContext()).inflate(R.layout.dialog_negative_positive,null);
builder.setView(view);
TextView positive = view.findViewById(R.id.dialogPositiveButton);
TextView negative = view.findViewById(R.id.dialogNegativeButton);
TextView text = view.findViewById(R.id.dialogAskMessage);
text.setText("");
positive.setText("í™•ì¸");
dialog = builder.create();
dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
positive.setOnClickListener(v -> {
    dialog.dismiss();
    listener.finishBottomSheet(true);
    dismiss();
});
negative.setOnClickListener(v -> {
    dialog.dismiss();
});
dialog.show();
```

ì´ê±´ ì›ë˜ ì½”ë“œ.

2ê°€ì§€ë¡œ ë†“ê³  ë¹„êµí•´ë³´ë©´, í›¨ì”¬ ê°„í¸í•˜ë‹¤ëŠ” ê²ƒì„ ëŠë‚„ ìˆ˜ ìˆë‹¤. 

ë‚¨ì€ Alert Dialogë“¤ë„ ì¡°ë§Œê°„ ì •ë¦¬ë¥¼ ì§„í–‰í•  ë“¯ í•˜ë‹¤. 

<aside>

    ğŸ’¡ ì˜¤ëŠ˜ ìœ„ì˜ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ë©´ì„œ ë“¤ì—ˆë˜ ìƒê°ì€ `interface` ë¥¼ í™œìš©í•  ìˆ˜ë„ ìˆì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ìƒê°ì´ë‹¤. 

    â†’ `setViewComponent()` ì™€ `createDialog()` ëŠ” ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë  ë©”ì„œë“œë¼ê³  ìƒê°í–ˆê¸° ë•Œë¬¸.
    (ì¶”ê°€ë¡œ, `getPositive()` ì •ë„..?)

</aside>

ë‚¨ì€ Alert Dialogë¥¼ ì •ë¦¬í•˜ë©´ì„œ interfaceë¥¼ ê³ ë ¤í•´ì„œ ë‹¤ì‹œ ì„¤ê³„í•˜ê³  êµ¬í˜„í•´ë³´ë„ë¡ í•´ì•¼ê² ë‹¤.

---

## RecyclerView Item

<img src="image/2022_03_07/1.png" width="50%"/>

<img src="image/2022_03_07/2.png" width="50%"/>

Alert Dialogì—ì„œ â€œë„¤â€ë¥¼ ì„ íƒí•˜ë©´, itemì´ ì‚­ì œë˜ë„ë¡ êµ¬í˜„í–ˆë‹¤. 

<img src="image/2022_03_07/3.png" width="50%"/>

<img src="image/2022_03_07/4.png" width="50%"/>

ì™¼ìª½ì´ ë¬¸ì œ ë°œìƒ ìƒí™©, ì˜¤ë¥¸ìª½ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘ ìƒí™©

<aside>

    ğŸ’¥  RecyclerViewì—ì„œ íŠ¹ì • itemì„ data ì„¸íŠ¸ì—ì„œ ì œê±°í•œ í›„, `notifyDataSetChanged()` ì„ í˜¸ì¶œí•˜ë©´, ë‚´ê°€ ëˆ„ë¥¸ itemì´ ì•„ë‹Œ, ë‹¤ë¥¸ itemì´ ì‚­ì œë˜ëŠ” ë¬¸ì œ ë°œìƒ

    (ì •í™•íˆëŠ” ë‹¤ë¥¸ itemì´ ì‚­ì œë˜ëŠ”ê²Œ ì•„ë‹ˆë¼, ì´ìƒí•œ itemì´ ì‚­ì œëœ ê²ƒ ì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒ...)

</aside>

```java
public void setData(GatchJoinState data){            
	this.joinState = data;                       
	if(data == GatchJoinState.Admin) {               
			acceptLayout.setVisibility(View.VISIBLE);               
			changeAdminLayout();            
		}        
}
```

ê¸°ì¡´ ì½”ë“œ

```java
public void setData(GatchJoinState data){            
	this.joinState = data;  
	acceptLayout.setVisibility(View.INVISIBLE);  //ì¶”ê°€í•œ ë¶€ë¶„                
	if(data == GatchJoinState.Admin) {               
			acceptLayout.setVisibility(View.VISIBLE);               
			changeAdminLayout();            
		}        
}
```

ìˆ˜ì • ì½”ë“œ 

<aside>

    â—  > RecyclerViewì˜ itemViewë¥¼ ì´ˆê¸°í™”í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•œ ë¬¸ì œì´ë‹¤. 

    â†’ ë§¤ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œë§ˆë‹¤, ìƒ‰ìƒë“± ë•Œë¬¸ì— itemì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ë° ê²°êµ­ì€ ëª¨ë‘ itemView ì´ˆê¸°í™” ë¬¸ì œì˜€ë‹¤. 

    í˜„ì¬ ìœ„ì˜ ìˆ˜ì •ì½”ë“œì—ëŠ” ê¸‰í•œ ê²ƒì¸ ê±°ì ˆ/ìˆ˜ë½ ë ˆì´ì•„ì›ƒì˜ visibilityë§Œ ì´ˆê¸°í™”ë¥¼ ì‹œì¼œë†¨ëŠ”ë°, ë‚˜ì¤‘ì— data binding ì‘ì—…ì„ í•  ë•Œ ê° viewì— ëŒ€í•´ì„œ ìŠì§€ ë§ê³  ê¼­ ì´ˆê¸°í™” í•¨ìˆ˜ êµ¬í˜„í•˜ë„ë¡ í•˜ì.

</aside>

---

## View LayoutParam ìˆ˜ì •

1. ì›ë˜ ìƒí™©

<img src="image/2022_03_07/5.png" width="50%"/>

ìˆ˜ë½ ë²„íŠ¼ì„ í´ë¦­ì‹œ, messageì™€ time viewì˜ ë ˆì´ì•„ì›ƒ ì œì•½ ì¡°ê±´ì„ ë³€ê²½í•  ê²ƒì´ë‹¤. 

1. ì²˜ìŒ ì‹œë„í•œ ì½”ë“œ

```java
ConstraintLayout.LayoutParams timeParams = new ConstraintLayout.LayoutParams(time.getLayoutParams());
```
<img src="image/2022_03_07/6.png" width="50%"/>

ìœ„ì˜ ì‚¬ì§„ê³¼ ê°™ì´, ë ˆì´ì•„ì›ƒ ì œì•½ì´ ë§ê°€ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. 

1. ì´í›„ ìˆ˜ì •í•œ ì½”ë“œ

```java
ConstraintLayout.LayoutParams timeParams = (ConstraintLayout.LayoutParams) time.getLayoutParams();    
```
<img src="image/2022_03_07/7.png" width="50%"/>

ì •ìƒì ìœ¼ë¡œ ê¸°ì¡´ ë ˆì´ì•„ì›ƒì„ ìœ ì§€í•˜ë©´ì„œ, í•„ìš”í•œ ì œì•½ì¡°ê±´ë§Œ ìˆ˜ì •ë˜ì—ˆë‹¤.

<aside>

    ğŸ’¡ ê¸°ì¡´ ë ˆì´ì•„ì›ƒ ì œì•½ì— ëŒ€í•´ ìˆ˜ì •í•  ê²½ìš°, ìƒˆë¡œìš´ ì œì•½ì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ê¸°ì¡´ ì œì•½ì„ ë¶ˆëŸ¬ì™€ì•¼ í•¨

    > new ConstraintLayout.LayoutParams()ë¥¼ ì‘ì„±í–ˆì„ ë•Œ, ì´ ìƒì„±ì ì•ˆì— timeì˜ ë ˆì´ì•„ì›ƒ paramsë¥¼ ë¶ˆëŸ¬ë‹¤ê°€ ë„£ì–´ì£¼ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—, ê¸°ì¡´ ë ˆì´ì•„ì›ƒì€ ìœ ì§€í•˜ê³  ì›í•˜ëŠ” ë¶€ë¶„ë§Œ ìˆ˜ì •ì´ ì§„í–‰ë  ê²ƒì´ë¼ ìƒê°í–ˆë‹¤.

    í•˜ì§€ë§Œ ì•„ë‹ˆë‹¤. ê²°êµ­ì€ ìƒˆë¡œìš´ ìƒì„±ìë¥¼ ìƒì„±í•´ì£¼ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì¸ ë“¯ í•˜ë‹¤.

    â—Â ê¸°ì¡´ ë ˆì´ì•„ì›ƒ ìˆ˜ì •í•˜ê³  ì‹¶ìœ¼ë©´, ê¸°ì¡´ ë ˆì´ì•„ì›ƒ params ë¶ˆëŸ¬ë‹¤ê°€ ìƒˆë¡œìš´ ë³€ìˆ˜ì— í• ë‹¹í•˜ì.

</aside>

```java
private void changeAccessLayout(){
                       
	acceptLayout.setVisibility(View.GONE);
           
	ConstraintLayout.LayoutParams timeParams = (ConstraintLayout.LayoutParams) time.getLayoutParams();            
	timeParams.baselineToBaseline = name.getId();           
	time.setLayoutParams(timeParams);
           
	ConstraintLayout.LayoutParams messageParams = (ConstraintLayout.LayoutParams) message.getLayoutParams();           
	messageParams.endToStart = time.getId();          
	messageParams.rightMargin = (int) new ReturnPx(18,context).returnPx();            
	message.setLayoutParams(messageParams);        
}
```

ìœ„ì˜ ìƒí™©ì— ëŒ€í•œ ì½”ë“œì´ë‹¤.